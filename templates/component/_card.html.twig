{% block javascripts %}
  {{ encore_entry_script_tags('favorite') }}
{% endblock %}

<div class="card box-shadow p-2 h-100">
  <div class="m-3">
    <div class="d-flex justify-content-between">
      <div class="d-flex gap-3">
        {% for skill in offer.skills %}
          <span class="badge badge-pill bg-quaternary fs-6 fw-normal text-dark border">{{ skill.name }}</span>
        {% endfor %}
      </div>

      <div>
        {% if offer.isImportant and is_granted('ROLE_RECRUITER') %}
          <span class="badge badge-pill bg-danger fw-normal mx-1">Important</span>
        {% endif %}
        {% if is_granted('ROLE_CANDIDATE') and application ?? false %}
          {% if application.applicationStatus == constant('App\\Entity\\Application::APPLICATION_STATUS')['IN_PROGRESS'] %}
            <span class="badge badge-pill text-dark fw-normal">ðŸŸ  En cours d'Ã©tude</span>
          {% elseif application.applicationStatus == constant('App\\Entity\\Application::APPLICATION_STATUS')['REJECTED'] %}
            <span class="badge badge-pill text-dark fw-normal">ðŸ”´ RejetÃ©e</span>
            {% elseif application.applicationStatus == constant("App\\Entity\\Application::APPLICATION_STATUS")['ACCEPTED'] %}
            <span class="badge badge-pill text-dark fw-normal">ðŸŸ¢ AcceptÃ©e</span>
          {% endif %}
        {% endif %}
        {% if is_granted('ROLE_CANDIDATE') %}
          <a class="toggleFavorite ms-2 text-decoration-none text-dark" href="{{ path('app_candidate_add_favorite', { id: offer.id }) }}"><i class="bi fs-4 {{ app.user.candidate.isInFavorite(offer) ? 'bi-bookmark-check-fill' : 'bi-bookmark' }}"></i></a>
        {% endif %}
      </div>
    </div>
    <div class="fs-6 mt-2">{{ offer.city }}
      ({{ offer.postalCode }})</div>

    <div class="my-3">
      <h2 class="fs-4 card-title card-offer-title">{{ offer.title }}</h2>
    </div>
    <div class="d-flex justify-content-between my-2">
      <h3 class="fs-4">{{ offer.annualWage / 1000 }}Kâ‚¬/ an</h3>
      <a href="{{ app.user ? path('app_offer_show_loggedin', { id: offer.id }) : path('app_offer_show_loggedout', { id: offer.id }) }}" class="btn btn-secondary px-5 py-2">Voir</a>
    </div>
  </div>
</div>
